{"version":3,"file":"agreements.js","names":["AgreementApi","endpoint","client","constructor","createAgreement","institutionId","maxHistoricalDays","accessValidForDays","accessScope","payload","request","parameters","method","HttpMethod","POST","getAgreements","limit","offset","params","getAgreementById","agreementId","deleteAgreement","DELETE","acceptAgreement","ip","userAgent","PUT"],"sources":["../../../node_modules/nordigen-node/lib/api/agreements.js"],"sourcesContent":["import {HttpMethod} from \"../httpMethod.js\";\n\nexport default class AgreementApi {\n\n    #endpoint = \"agreements/enduser\";\n    #client = null;\n\n    /**\n     * Agreements api class\n     * @param {Object} params\n     * @param {NordigenClient} params.client\n    */\n    constructor({client}) {\n        this.#client = client;\n    }\n\n    /**\n     * Create enduser agreement\n     * @param {Object} params\n     * @param {string} params.institutionId Institutions ID.\n     * @param {number} [params.maxHistoricalDays] Length of the transaction history. Defaults to 90.\n     * @param {number} [params.accessValidForDays] access valid for days. Defaults to 90.\n     * @param {string[]} [params.accessScope access] scope for account, by default provides access to balances, details and transactions.\n     * @returns Agreement object\n     */\n    createAgreement({institutionId, maxHistoricalDays = 90, accessValidForDays = 90, accessScope = [\n        \"balances\",\n        \"details\",\n        \"transactions\"\n    ]}) {\n\n        const payload = {\n            \"institution_id\": institutionId,\n            \"max_historical_days\": maxHistoricalDays,\n            \"access_valid_for_days\": accessValidForDays,\n            \"access_scope\": accessScope,\n        };\n\n        return this.#client.request({\n            endpoint: `${this.#endpoint}/`, \n            parameters: payload, \n            method: HttpMethod.POST\n        });\n    }\n\n    /**\n     * Get list of agreements\n     * @param {Object} params\n     * @param {number} [params.limit] number of results to return per page. Defaults to 100.\n     * @param {number} [params.offset] the initial index from which to return the results. Defaults to 0.\n     * @returns End user agreements\n    */\n    getAgreements({limit = 100, offset = 0} = {}) {\n        const params = {limit, offset};\n\n        return this.#client.request({\n            endpoint: `${this.#endpoint}/`, \n            parameters: params\n        });\n    }\n\n    /**\n     * Get agreement by agreement id\n     * @param {string} agreementId\n     * @returns object with specific enduser agreement\n     */\n    getAgreementById(agreementId) {\n        return this.#client.request({\n            endpoint: `${this.#endpoint}/${agreementId}/`\n        });\n    }\n\n    /**\n     * Delete enduser agreement\n     * @param {string} agreementId\n     * @returns Deleted agreement object\n     */\n    deleteAgreement(agreementId) {\n        return this.#client.request({\n            endpoint: `${this.#endpoint}/${agreementId}/`, \n            method: HttpMethod.DELETE\n        });\n    }\n\n    /**\n     * Accept End user agreement\n     * @param {Object} params\n     * @param {string} params.agreementId\n     * @param {string} params.ip\n     * @param {string} params.userAgent\n     * @returns Information on accepted agreement\n     */\n    acceptAgreement({agreementId, ip, userAgent}) {\n        const payload = {\n            'user_agent': userAgent,\n            'ip_address': ip\n        }\n\n        return this.#client.request({\n            endpoint: `${this.#endpoint}/${agreementId}/accept/`, \n            parameters: payload, \n            method: HttpMethod.PUT\n        });\n    }\n}\n"],"mappings":";;;;;;;AAAA;;AAEe,MAAMA,YAAN,CAAmB;EAE9B,CAACC,QAAD,GAAY,oBAAZ;EACA,CAACC,MAAD,GAAU,IAAV;EAEA;AACJ;AACA;AACA;AACA;;EACIC,WAAW,CAAC;IAACD;EAAD,CAAD,EAAW;IAClB,KAAK,CAACA,MAAN,GAAeA,MAAf;EACH;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACIE,eAAe,CAAC;IAACC,aAAD;IAAgBC,iBAAiB,GAAG,EAApC;IAAwCC,kBAAkB,GAAG,EAA7D;IAAiEC,WAAW,GAAG,CAC3F,UAD2F,EAE3F,SAF2F,EAG3F,cAH2F;EAA/E,CAAD,EAIX;IAEA,MAAMC,OAAO,GAAG;MACZ,kBAAkBJ,aADN;MAEZ,uBAAuBC,iBAFX;MAGZ,yBAAyBC,kBAHb;MAIZ,gBAAgBC;IAJJ,CAAhB;IAOA,OAAO,KAAK,CAACN,MAAN,CAAaQ,OAAb,CAAqB;MACxBT,QAAQ,EAAG,GAAE,KAAK,CAACA,QAAS,GADJ;MAExBU,UAAU,EAAEF,OAFY;MAGxBG,MAAM,EAAEC,sBAAA,CAAWC;IAHK,CAArB,CAAP;EAKH;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;;;EACIC,aAAa,CAAC;IAACC,KAAK,GAAG,GAAT;IAAcC,MAAM,GAAG;EAAvB,IAA4B,EAA7B,EAAiC;IAC1C,MAAMC,MAAM,GAAG;MAACF,KAAD;MAAQC;IAAR,CAAf;IAEA,OAAO,KAAK,CAACf,MAAN,CAAaQ,OAAb,CAAqB;MACxBT,QAAQ,EAAG,GAAE,KAAK,CAACA,QAAS,GADJ;MAExBU,UAAU,EAAEO;IAFY,CAArB,CAAP;EAIH;EAED;AACJ;AACA;AACA;AACA;;;EACIC,gBAAgB,CAACC,WAAD,EAAc;IAC1B,OAAO,KAAK,CAAClB,MAAN,CAAaQ,OAAb,CAAqB;MACxBT,QAAQ,EAAG,GAAE,KAAK,CAACA,QAAS,IAAGmB,WAAY;IADnB,CAArB,CAAP;EAGH;EAED;AACJ;AACA;AACA;AACA;;;EACIC,eAAe,CAACD,WAAD,EAAc;IACzB,OAAO,KAAK,CAAClB,MAAN,CAAaQ,OAAb,CAAqB;MACxBT,QAAQ,EAAG,GAAE,KAAK,CAACA,QAAS,IAAGmB,WAAY,GADnB;MAExBR,MAAM,EAAEC,sBAAA,CAAWS;IAFK,CAArB,CAAP;EAIH;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;EACIC,eAAe,CAAC;IAACH,WAAD;IAAcI,EAAd;IAAkBC;EAAlB,CAAD,EAA+B;IAC1C,MAAMhB,OAAO,GAAG;MACZ,cAAcgB,SADF;MAEZ,cAAcD;IAFF,CAAhB;IAKA,OAAO,KAAK,CAACtB,MAAN,CAAaQ,OAAb,CAAqB;MACxBT,QAAQ,EAAG,GAAE,KAAK,CAACA,QAAS,IAAGmB,WAAY,UADnB;MAExBT,UAAU,EAAEF,OAFY;MAGxBG,MAAM,EAAEC,sBAAA,CAAWa;IAHK,CAArB,CAAP;EAKH;;AArG6B"}